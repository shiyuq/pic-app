(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-artistEdit-artistEdit"],{"2bff":function(t,e,a){"use strict";a.r(e);var n=a("722a"),i=a("a6b0");for(var r in i)"default"!==r&&function(t){a.d(e,t,(function(){return i[t]}))}(r);a("7336");var o,s=a("f0c5"),c=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,"15941e14",null,!1,n["a"],o);e["default"]=c.exports},6869:function(t,e,a){"use strict";var n=a("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("96cf");var i=n(a("1da1")),r=n(a("f9e2")),o=a("e172"),s={data:function(){return{id:"",artist:{avatar:"",name:"",type:"",introduction:""},avatar:{baseData:"",fileName:"avatar.png"}}},onLoad:function(t){this.id=t.id},onShow:function(){var t=this;return(0,i.default)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.id){e.next=3;break}return e.next=3,t.getArtistDetail();case 3:case"end":return e.stop()}}),e)})))()},methods:{getArtistDetail:function(){var t=this;return(0,i.default)(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.default.getArtistDetail({id:t.id});case 3:a=e.sent,n=a.data,t.artist=n,e.next=10;break;case 8:e.prev=8,e.t0=e["catch"](0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})))()},uploadImage:function(){var t=this;uni.chooseImage({sourceType:["camera","album"],sizeType:"compressed",count:1,success:function(e){t.artist.avatar=e.tempFilePaths[0],(0,o.pathToBase64)(e.tempFilePaths[0]).then((function(e){t.avatar.baseData=e}))}})},updateArtist:function(){var t=this;return(0,i.default)(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.artist.name){e.next=3;break}return uni.showToast({title:"请填写画家名称",icon:"none",duration:2e3}),e.abrupt("return");case 3:if(t.artist.type){e.next=6;break}return uni.showToast({title:"请填写画家类型",icon:"none",duration:2e3}),e.abrupt("return");case 6:if(t.artist.introduction){e.next=9;break}return uni.showToast({title:"请填写画家介绍",icon:"none",duration:2e3}),e.abrupt("return");case 9:if(a={name:t.artist.name,type:t.artist.type,introduction:t.artist.introduction},!t.id){e.next=19;break}return t.avatar.baseData&&(a.avatar=t.avatar),a.id=t.artist.id,e.next=15,r.default.updateArtist(a);case 15:uni.showToast({title:"更新成功",icon:"success",duration:1e3}),setTimeout((function(){uni.navigateTo({url:"/pages/artistManage/artistManage"})}),500),e.next=27;break;case 19:if(t.avatar.baseData){e.next=22;break}return uni.showToast({title:"请上传画家头像",icon:"none",duration:2e3}),e.abrupt("return");case 22:return a.avatar=t.avatar,e.next=25,r.default.addArtist(a);case 25:uni.showToast({title:"添加成功",icon:"success",duration:1e3}),setTimeout((function(){uni.navigateTo({url:"/pages/artistManage/artistManage"})}),500);case 27:case"end":return e.stop()}}),e)})))()}}};e.default=s},"722a":function(t,e,a){"use strict";var n;a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){return n}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[a("v-uni-view",{staticClass:"line"},[a("v-uni-view",{staticClass:"star"},[t._v("*")]),a("v-uni-view",{staticClass:"line-name"},[t._v("画家名称")]),a("v-uni-view",{staticClass:"selector"},[a("v-uni-input",{staticClass:"line-right",attrs:{type:"text",placeholder:"请填写画家名称"},model:{value:t.artist.name,callback:function(e){t.$set(t.artist,"name",e)},expression:"artist.name"}})],1)],1),a("v-uni-view",{staticClass:"line"},[a("v-uni-view",{staticClass:"star"},[t._v("*")]),a("v-uni-view",{staticClass:"line-name"},[t._v("画家图片")]),a("v-uni-view",{staticClass:"selector",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.uploadImage.apply(void 0,arguments)}}},[a("img",{attrs:{src:t.artist.avatar||"/static/avatar-user.png",alt:""}})])],1),a("v-uni-view",{staticClass:"line"},[a("v-uni-view",{staticClass:"star"},[t._v("*")]),a("v-uni-view",{staticClass:"line-name"},[t._v("简要描述")]),a("v-uni-view",{staticClass:"selector"},[a("v-uni-input",{staticClass:"line-right",attrs:{type:"text",placeholder:"请填写简要描述"},model:{value:t.artist.type,callback:function(e){t.$set(t.artist,"type",e)},expression:"artist.type"}})],1)],1),a("v-uni-view",{staticClass:"goods-name"},[a("v-uni-view",{staticClass:"part3-line"},[a("v-uni-view",{staticClass:"left"},[t._v("*")]),a("v-uni-view",{staticClass:"right"},[t._v("画家详情")])],1),a("v-uni-view",{staticClass:"part3-content"},[a("v-uni-input",{attrs:{type:"text",placeholder:"请详细介绍画家资料"},model:{value:t.artist.introduction,callback:function(e){t.$set(t.artist,"introduction",e)},expression:"artist.introduction"}})],1)],1),a("v-uni-view",{staticClass:"footer"},[a("v-uni-view",{staticClass:"btn"},[a("v-uni-view",{staticClass:"botton",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.updateArtist()}}},[t._v(t._s(t.id?"保存修改":"确认添加"))])],1)],1)],1)},r=[]},7336:function(t,e,a){"use strict";var n=a("96a9"),i=a.n(n);i.a},7574:function(t,e,a){var n=a("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\n/* 水平间距 */\n/* 水平间距 */.line[data-v-15941e14]{background-color:#fff;height:48px;padding:0 15px;display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center;margin-bottom:1px}.line .star[data-v-15941e14]{line-height:48px;color:#f61212;margin-right:2px}.line .line-name[data-v-15941e14]{line-height:48px;font-size:16px;font-weight:500;color:#000}.line .selector[data-v-15941e14]{line-height:48px;margin-left:auto;display:flex;align-items:center}.line .selector .select[data-v-15941e14]{font-size:15px;font-weight:500;color:#ccc}.line .selector .line-select-new[data-v-15941e14]{text-align:right;color:#333;font-size:15px;font-weight:500}.line .selector img[data-v-15941e14]{width:37px;height:37px;border-radius:50%}.line .line-right[data-v-15941e14]{margin-left:auto;text-align:right;font-size:15px}.goods-name[data-v-15941e14]{margin:10px 0;background-color:#fff}.goods-name .part3-line[data-v-15941e14]{display:flex;flex-direction:row;align-items:center;padding:17px 0 25px 15px}.goods-name .part3-line .left[data-v-15941e14]{color:#f61212}.goods-name .part3-line .right[data-v-15941e14]{font-size:16px;font-weight:500;color:#000}.goods-name .part3-content[data-v-15941e14]{padding:0 15px 75px 15px}.footer[data-v-15941e14]{background-color:#fff;width:100%;position:fixed;bottom:0}.footer .btn[data-v-15941e14]{margin:10px 15px}.footer .botton[data-v-15941e14]{width:100%;height:44px;background-color:#217bfb;border-radius:22px;font-size:15px;font-weight:500;color:#fff;text-align:center;line-height:44px}',""]),t.exports=e},"96a9":function(t,e,a){var n=a("7574");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("4f06").default;i("62346e98",n,!0,{sourceMap:!1,shadowMode:!1})},a6b0:function(t,e,a){"use strict";a.r(e);var n=a("6869"),i=a.n(n);for(var r in n)"default"!==r&&function(t){a.d(e,t,(function(){return n[t]}))}(r);e["default"]=i.a},e172:function(t,e,a){"use strict";function n(t){if(0===t.indexOf("_www")||0===t.indexOf("_doc")||0===t.indexOf("_documents")||0===t.indexOf("_downloads"))return t;if(0===t.indexOf("file://"))return t;if(0===t.indexOf("/storage/emulated/0/"))return t;if(0===t.indexOf("/")){var e=plus.io.convertAbsoluteFileSystem(t);if(e!==t)return e;t=t.substr(1)}return"_www/"+t}function i(t){var e=t.split(",");return e[e.length-1]}a("c975"),a("ace4"),a("d3b7"),a("ac1f"),a("3ca3"),a("466d"),a("1276"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("2954"),a("649e"),a("219c"),a("b39a"),a("72f7"),a("ddb0"),a("2b3d"),Object.defineProperty(e,"__esModule",{value:!0}),e.pathToBase64=c,e.base64ToPath=u;var r=0;function o(){return Date.now()+String(r++)}function s(t,e){for(var a=t.split("."),n=e.split("."),i=!1,r=0;r<n.length;r++){var o=a[r]-n[r];if(0!==o){i=o>0;break}}return i}function c(t){return new Promise((function(e,a){if("object"===typeof window&&"document"in window){if("function"===typeof FileReader){var i=new XMLHttpRequest;return i.open("GET",t,!0),i.responseType="blob",i.onload=function(){if(200===this.status){var t=new FileReader;t.onload=function(t){e(t.target.result)},t.onerror=a,t.readAsDataURL(this.response)}},i.onerror=a,void i.send()}var r=document.createElement("canvas"),o=r.getContext("2d"),s=new Image;return s.onload=function(){r.width=s.width,r.height=s.height,o.drawImage(s,0,0),e(r.toDataURL()),r.height=r.width=0},s.onerror=a,void(s.src=t)}"object"!==typeof plus?"object"===typeof wx&&wx.canIUse("getFileSystemManager")?wx.getFileSystemManager().readFile({filePath:t,encoding:"base64",success:function(t){e("data:image/png;base64,"+t.data)},fail:function(t){a(t)}}):a(new Error("not support")):plus.io.resolveLocalFileSystemURL(n(t),(function(t){t.file((function(t){var n=new plus.io.FileReader;n.onload=function(t){e(t.target.result)},n.onerror=function(t){a(t)},n.readAsDataURL(t)}),(function(t){a(t)}))}),(function(t){a(t)}))}))}function u(t){return new Promise((function(e,a){if("object"===typeof window&&"document"in window){t=t.split(",");var n=t[0].match(/:(.*?);/)[1],r=atob(t[1]),c=r.length,u=new Uint8Array(c);while(c--)u[c]=r.charCodeAt(c);return e((window.URL||window.webkitURL).createObjectURL(new Blob([u],{type:n})))}var l=t.split(",")[0].match(/data\:\S+\/(\S+);/);l?l=l[1]:a(new Error("base64 error"));var d=o()+"."+l;if("object"!==typeof plus)if("object"===typeof wx&&wx.canIUse("getFileSystemManager")){p=wx.env.USER_DATA_PATH+"/"+d;wx.getFileSystemManager().writeFile({filePath:p,data:i(t),encoding:"base64",success:function(){e(p)},fail:function(t){a(t)}})}else a(new Error("not support"));else{var f="_doc",v="uniapp_temp",p=f+"/"+v+"/"+d;if(!s("Android"===plus.os.name?"1.9.9.80627":"1.9.9.80472",plus.runtime.innerVersion))return void plus.io.resolveLocalFileSystemURL(f,(function(n){n.getDirectory(v,{create:!0,exclusive:!1},(function(n){n.getFile(d,{create:!0,exclusive:!1},(function(n){n.createWriter((function(n){n.onwrite=function(){e(p)},n.onerror=a,n.seek(0),n.writeAsBinary(i(t))}),a)}),a)}),a)}),a);var w=new plus.nativeObj.Bitmap(d);w.loadBase64Data(t,(function(){w.save(p,{},(function(){w.clear(),e(p)}),(function(t){w.clear(),a(t)}))}),(function(t){w.clear(),a(t)}))}}))}}}]);